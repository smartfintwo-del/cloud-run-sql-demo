
<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<title>Workshop Slides - Cloud Run Ã— Cloud SQL</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; margin:0; }
section { padding: 60px 80px; border-bottom: 1px solid #eee; }
h1,h2 { margin: 0 0 16px 0; }
code, pre { background:#0f172a; color:#e2e8f0; padding: 2px 6px; border-radius:6px; }
pre { padding:12px; overflow:auto; }
.small { color:#64748b; }
ul { line-height: 1.8; }
</style>
</head>
<body>

<section>
  <h1>Cloud Run Ã— Cloud SQL (Postgres) ì‹¤ìŠµ</h1>
  <p class="small">Node.js ë°±ì—”ë“œ + ì´ˆê°„ë‹¨ í”„ë¡ íŠ¸ì—”ë“œ</p>
</section>

<section>
  <h2>ëª©í‘œ</h2>
  <ul>
    <li>Cloud SQL(Postgres) ì¸ìŠ¤í„´ìŠ¤ ì¤€ë¹„</li>
    <li>Node.js ì•±ì´ Cloud SQLì— ì—°ê²° (Unix ì†Œì¼“ / TCP)</li>
    <li>Cloud Runì— ë°°í¬í•˜ê³  í™˜ê²½ë³€ìˆ˜ë¡œ DB ì ‘ì† ì •ë³´ ì„¤ì •</li>
    <li>í”„ë¡ íŠ¸ì—ì„œ ê°„ë‹¨ ì…ë ¥ â†’ DB ì €ì¥/ì¡°íšŒ</li>
  </ul>
</section>

<section>
  <h2>DB ìŠ¤í‚¤ë§ˆ</h2>
  <pre><code>CREATE EXTENSION IF NOT EXISTS "pgcrypto";
CREATE TABLE IF NOT EXISTS upload_history (...);
CREATE TABLE IF NOT EXISTS holdings (...);</code></pre>
  <p class="small">ìì„¸í•œ ë‚´ìš©ì€ <code>backend/database/schema.sql</code> ì°¸ê³ </p>
</section>

<section>
  <h2>ì¤‘ìš” í¬ì¸íŠ¸</h2>
  <ul>
    <li>Cloud Run â†’ <strong>Connections</strong> íƒ­ì—ì„œ Cloud SQL ì¸ìŠ¤í„´ìŠ¤ ì¶”ê°€</li>
    <li>í™˜ê²½ë³€ìˆ˜: <code>CLOUD_SQL_CONNECTION_NAME</code>, <code>DB_USER</code>, <code>DB_PASSWORD</code>, <code>DB_NAME</code></li>
    <li>ì„œë¹„ìŠ¤ ê³„ì •ì— <strong>Cloud SQL Client</strong> ì—­í• </li>
    <li>ì»¨í…Œì´ë„ˆëŠ” <code>0.0.0.0:8080</code> ë¦¬ìŠ¤ë‹</li>
  </ul>
</section>

<section>
  <h2>ë³´ì•ˆ(ì„ íƒ)</h2>
  <ul>
    <li>ì“°ê¸° ìš”ì²­ì€ Basic Authë¡œ ë³´í˜¸</li>
    <li>Cloud Run ë³€ìˆ˜ë¡œ <code>UPLOAD_USER</code>/<code>UPLOAD_PASS</code> ì„¤ì •</li>
  </ul>
</section>

<section>
  <h2>ë°ëª¨ íë¦„</h2>
  <ol>
    <li>ì…ë ¥(í‹°ì»¤/íšŒì‚¬/ë¹„ì¤‘/ì„¹í„°) â†’ <strong>ì €ì¥</strong></li>
    <li>ë°±ì—”ë“œ: <code>POST /api/holdings</code> â†’ DB INSERT</li>
    <li>í”„ë¡ íŠ¸: <strong>ìƒˆë¡œê³ ì¹¨</strong> â†’ <code>GET /api/holdings</code> ëª©ë¡ í‘œì‹œ</li>
  </ol>
</section>

<section>
  <h2>íŠ¸ëŸ¬ë¸”ìŠˆíŒ…</h2>
  <ul>
    <li>ECONNREFUSED 127.0.0.1 â†’ ì†Œì¼“ ê²½ë¡œ/ì—°ê²° ì¶”ê°€/í™˜ê²½ë³€ìˆ˜ í™•ì¸</li>
    <li>ê¶Œí•œ ë¬¸ì œ â†’ ì„œë¹„ìŠ¤ ê³„ì • ì—­í•  ì¬í™•ì¸</li>
    <li>í—¬ìŠ¤ ì²´í¬ ì‹¤íŒ¨ â†’ í¬íŠ¸/ë¦¬ìŠ¤ë‹/Startup probe</li>
  </ul>
</section>

<section>
  <h2>ë!</h2>
  <p>ì§ˆë¬¸ í™˜ì˜ ğŸ™Œ</p>
</section>

</body>
</html>
